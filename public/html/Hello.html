<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Helloword</title>
    <script src="../js/jquery.js"></script>
</head>
<body onload="test()">
<script>
    function baidu(){
        $.ajax({
//            type: "POST",
            url: "https://www.oschina.net",
            contentType: "application/json;charset=utf-8",
            dataType:"json",
            beforeSend: function (XMLHttpRequest) {
                XMLHttpRequest.setRequestHeader("Access-Control-Allow-Origin:*");
            },
            success:function(data){
                    console.log("成功")
            },
            error:function(error){
                console.log("失败")
            }
        });
    }
    function test1(){

        $.ajax({
            type: "POST",
            url: "http://www.miguvideo.com/wap/resource/miguPC_client/data/detailData.jsp?cid=649371244",
            contentType: "application/json;charset=utf-8",
            dataType:"json",
            beforeSend: function (XMLHttpRequest) {
                XMLHttpRequest.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
                XMLHttpRequest.setRequestHeader("Access-Control-Allow-Origin:*");
//                XMLHttpRequest.setRequestHeader("userId", userId);
//                XMLHttpRequest.setRequestHeader("token", userToken);
//                XMLHttpRequest.setRequestHeader("SDKCEId", SDKCEId);
//                XMLHttpRequest.setRequestHeader("X-UP-CLIENT-CHANNEL-ID", "101700040000001");

            },
            success: function (data) {
                console.log(JSON.stringify(data));
            },error:function(error){
                console.log("请求失败"+JSON.stringify(error));
            }
        });
    }
//    $.ajaxPrefilter( function (options) {
//        if (options.crossDomain && jQuery.support.cors) {
//            var http = (window.location.protocol === 'http:' ? 'http:' : 'https:');
//            options.url = http + '//cors-anywhere.herokuapp.com/' + options.url;
//            options.crossDomain = false;
//        }
//    });
    function test(){
        var url ="http://www.miguvideo.com/wap/resource/miguPC_client/data/detailData.jsp?cid=649371244";
        var xhr = getXHR();
        xhr.open("GET", url, true);
        xhr.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
        xhr.setRequestHeader('If-Modified-Since', '0');
//        xhr.setRequestHeader('Access-Control-Allow-Origin:http://www.miguvideo.com')
//        xhr.setRequestHeader("userId", info.userId);
//        xhr.setRequestHeader("userToken", info.userToken);
        xhr.setRequestHeader("SDKCEId", "79acd784-cbbb-4cae-8778-8723e001164b");
        xhr.setRequestHeader("X-UP-CLIENT-CHANNEL-ID", "101700040000001");
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4&&xhr.status==200) {
                var empInfo = JSON.parse(xhr.responseText);
                console.log(empInfo);

            }
        }
        xhr.send();
    }

    function getXHR() {
        try {
            return new XMLHttpRequest();
        } catch (e) {
            try {
                return new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
                return new ActiveXObject("Msxml2.XMLHTTP");
            }
        }
    }
</script>
<div id="radio_div">
    全部下载为：
    <input name="rateType" onchange="getRate(this)" type="radio" value="1" checked /><label>标清</label>
    <input name="rateType" onchange="getRate(this)" type="radio" value="2"/><label>高清</label>
    <input name="rateType" onchange="getRate(this)" type="radio" value="3"/><label>720P</label>
    <input name="rateType" onchange="getRate(this)" type="radio" value="4"/><label>1080P<img src="../images/mark_vip.png"/></label>
</div>
<script>
    var rateType = $("input[type='radio']:checked").val();
    var uc;
    if (rateType ==1) {
        uc=54
    }
    function getRate(that){
        var rateTypeTemp = $(that).val()
        if (rateTypeTemp ==1) {
            uc=54
        }else if (rateTypeTemp == 2){
            uc=55
        }else if (rateTypeTemp == 2){
            uc=91
        }else{
            uc=92
        }
        //console.log(uc)
    }
    console.log("uc->"+uc)
</script>
</body>
</html>